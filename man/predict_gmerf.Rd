% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/predict_gmerf.R
\name{predict_gmerf}
\alias{predict_gmerf}
\title{Predict class labels from a fitted GMERF model}
\usage{
predict_gmerf(fit, new_df, thr = 0.5, random_effects = "x1", id = "id")
}
\arguments{
\item{fit}{A fitted GMERF model object returned by \code{\link{fit_gmerf}}.}

\item{new_df}{A data.frame containing new observations for prediction.}

\item{thr}{Numeric. Classification threshold for converting predicted
probabilities into class labels (default: 0.5).}

\item{random_effects}{Character. Name of the covariate used for the random
slope in the random-effects design.}

\item{id}{Character. Name of the cluster identifier column in \code{new_df}.}
}
\value{
A numeric vector of predicted class labels (0/1).
}
\description{
Generates binary predictions for new clustered data using a fitted
Generalized Mixed-Effects Random Forest (GMERF) model. Predictions combine
the fixed-effects random forest component with cluster-specific random
effects estimated during training.
}
\details{
For clusters observed in the training data, the corresponding random effects
are added to the fixed-effects prediction. For unseen clusters, only the
fixed-effects component is used.

The linear predictor is computed as:
\deqn{\eta = \hat f(X) + Z_i \hat b_i}
where \eqn{\hat f(X)} is the random forest prediction and \eqn{Z_i \hat b_i}
is the random-effects contribution for cluster \eqn{i}, when available.
}
\examples{
# Simulate clustered data
df <- sim_data_gmert(G = 20, n_i = 30, seed = 1)

# Fit GMERF
fit <- fit_gmerf(df, ntrees = 200, seed = 1, , max_iter_out = 50)

# Predict on training data
yhat <- predict_gmerf(fit, df)
table(yhat, df$y)

}
\references{
Hajjem, Ahlem, François Bellavance, and Denis Larocque. 2011.
“Mixed Effects Regression Trees for Clustered Data.” \emph{Statistics & Probability Letters} 81 (4): 451–59.
\doi{10.1016/j.spl.2010.12.003}.

Hajjem, Ahlem, Denis Larocque, and François Bellavance. 2017.
“Generalized Mixed Effects Regression Trees.” \emph{Statistics & Probability Letters} 126 (July): 114–18.
\doi{10.1016/j.spl.2017.02.033}.

Pellagatti, Massimo, Chiara Masci, Francesca Ieva, and Anna M. Paganoni. 2021.
“Generalized Mixed-Effects Random Forest: A Flexible Approach to Predict University Student Dropout.”
\emph{Statistical Analysis and Data Mining: The ASA Data Science Journal} 14 (3): 241–57.
\doi{10.1002/sam.11505}.
}
\seealso{
\code{\link{fit_gmerf}} for model fitting.

Other gmerf: 
\code{\link{fit_gmerf}()}
}
\concept{gmerf}
